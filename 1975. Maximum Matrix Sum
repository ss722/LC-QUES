class Solution {
public:
    long long maxMatrixSum(vector<vector<int>>& matrix) {
        long long negcnt = 0,sum=0,minval = INT_MAX;
        bool zero = false;
        for(auto it:matrix){
            for(auto c:it){
                sum+=abs(c);
                if(c==0) zero = true;
                if(c<0){
                    negcnt++;
                }
                minval = min((int)minval,abs(c));
            }
        }
        if(negcnt%2==0 || zero) return sum;
        return sum - 2*minval;
    }
};
